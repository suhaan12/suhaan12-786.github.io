<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chess ELO Tracker</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .input-section { margin-bottom: 30px; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        .elo-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .elo-table th, .elo-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .elo-table th { background-color: #f5f5f5; }
        .player-title { font-size: 0.9em; color: #666; }
        .flag { font-size: 1.2em; }
        select, button { margin: 5px; padding: 8px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Chess ELO Tracker</h1>
        
        <div class="input-section">
            <h3>Record Game Result:</h3>
            <select id="player1"></select>
            vs 
            <select id="player2"></select>
            <select id="result">
                <option value="1-0">White Wins</option>
                <option value="0-1">Black Wins</option>
                <option value="Â½-Â½">Draw</option>
            </select>
            <button onclick="recordGame()">Submit Result</button>
        </div>

        <h2>Current Ratings</h2>
        <table class="elo-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Name</th>
                    <th>Title</th>
                    <th>ELO Rating</th>
                    <th>Country</th>
                </tr>
            </thead>
            <tbody id="ratings-body"></tbody>
        </table>
    </div>

    <script>
        // Initialize players data
        const players = [
            // Grandmasters
            {name: "Hano Kafu", country: "ðŸ‡¯ðŸ‡µ", title: "GM", rating: 2500},
            {name: "Jean-Pascal Cuvier", country: "ðŸ‡«ðŸ‡·", title: "GM", rating: 2500},
            {name: "Lucas Moretti", country: "ðŸ‡ªðŸ‡¸", title: "GM", rating: 2500},
            {name: "Light Yagami", country: "ðŸ‡¯ðŸ‡µ", title: "GM", rating: 2500},
            
            // International Masters
            {name: "Elias Norberg", country: "ðŸ‡¸ðŸ‡ª", title: "IM", rating: 2400},
            {name: "Viktor Dragunov", country: "ðŸ‡·ðŸ‡º", title: "IM", rating: 2400},
            {name: "Alaric Varga", country: "ðŸ‡­ðŸ‡º", title: "IM", rating: 2400},
            // ... Add all other IMs and NMs similarly
        ];

        // Initialize localStorage
        if(!localStorage.getItem('eloData')) {
            localStorage.setItem('eloData', JSON.stringify(players));
        }

        // ELO calculation functions
        function getExpectedScore(ratingA, ratingB) {
            return 1 / (1 + Math.pow(10, (ratingB - ratingA) / 400));
        }

        function updateRatings(playerA, playerB, result) {
            const kFactor = 32; // Adjust K-factor as needed
            
            const expectedA = getExpectedScore(playerA.rating, playerB.rating);
            const expectedB = 1 - expectedA;
            
            let actualA, actualB;
            if(result === '1-0') {
                actualA = 1;
                actualB = 0;
            } else if(result === '0-1') {
                actualA = 0;
                actualB = 1;
            } else {
                actualA = actualB = 0.5;
            }

            playerA.rating += kFactor * (actualA - expectedA);
            playerB.rating += kFactor * (actualB - expectedB);
        }

        function populatePlayers() {
            const select1 = document.getElementById('player1');
            const select2 = document.getElementById('player2');
            const data = JSON.parse(localStorage.getItem('eloData'));
            
            data.forEach(player => {
                const option = document.createElement('option');
                option.value = player.name;
                option.text = `${player.name} ${player.country}`;
                select1.add(option.cloneNode(true));
                select2.add(option);
            });
        }

        function recordGame() {
            const player1 = document.getElementById('player1').value;
            const player2 = document.getElementById('player2').value;
            const result = document.getElementById('result').value;
            
            let data = JSON.parse(localStorage.getItem('eloData'));
            const p1 = data.find(p => p.name === player1);
            const p2 = data.find(p => p.name === player2);
            
            updateRatings(p1, p2, result);
            localStorage.setItem('eloData', JSON.stringify(data));
            updateRatingsTable();
        }

        function updateRatingsTable() {
            const tbody = document.getElementById('ratings-body');
            tbody.innerHTML = '';
            
            const data = JSON.parse(localStorage.getItem('eloData'))
                .sort((a, b) => b.rating - a.rating);
            
            data.forEach((player, index) => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${player.name} <span class="flag">${player.country}</span></td>
                    <td><span class="player-title">${player.title}</span></td>
                    <td>${Math.round(player.rating)}</td>
                    <td>${player.country}</td>
                `;
            });
        }

        // Initial setup
        populatePlayers();
        updateRatingsTable();
    </script>
</body>
</html>